// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Board {

	public struct GetComments: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// The identifier of the topic.
		public var topicID: BoardTopicID

		/// How to structure the comments.
		/// By default uses the user preference.
		/// If no token is used, defaults to ``CommentView/flat``.
		public var viewType: CommentView?

		/// Offset into the comments.
		public var offset: Int?

		/// How many comments to return.
		/// When ``viewType`` is ``CommentView/threaded`` or
		/// ``CommentView/twoLevel``, how many **top-level** comments
		/// to return.
		/// From 1 to 100. By default 20.
		public var count: Int?

		/// How many replies to return, combined, in all threads, when
		/// ``viewType`` is ``CommentView/threaded`` or
		/// ``CommentView/twoLevel``. Ignored for ``CommentView/flat``.
		/// From 1 to 100. By default 20.
		public var secondaryCount: Int?

		/// To retrieve a reply thread, the identifier of the comment
		/// whose replies you would like to get.
		/// **Important**: if you’re displaying comments as two levels,
		/// you need to pass ``CommentView/flat`` to ``viewType`` when
		/// loading reply threads.
		public var commentID: TopicCommentID?

		/// The sort order for the comments.
		/// By default ``CommentSortOrder/ascending``.
		public var sort: CommentSortOrder?

		/// Whether to return information about likes.
		public var needLikes: Bool?

		public struct Extended: SmithereenAPIRequest, Hashable, Encodable, Sendable {

			/// The identifier of the topic.
			public var topicID: BoardTopicID

			/// How to structure the comments.
			/// By default uses the user preference.
			/// If no token is used, defaults to ``CommentView/flat``.
			public var viewType: CommentView?

			/// Offset into the comments.
			public var offset: Int?

			/// How many comments to return.
			/// When ``viewType`` is ``CommentView/threaded`` or
			/// ``CommentView/twoLevel``, how many **top-level** comments
			/// to return.
			/// From 1 to 100. By default 20.
			public var count: Int?

			/// How many replies to return, combined, in all threads, when
			/// ``viewType`` is ``CommentView/threaded`` or
			/// ``CommentView/twoLevel``. Ignored for ``CommentView/flat``.
			/// From 1 to 100. By default 20.
			public var secondaryCount: Int?

			/// To retrieve a reply thread, the identifier of the comment
			/// whose replies you would like to get.
			/// **Important**: if you’re displaying comments as two levels,
			/// you need to pass ``CommentView/flat`` to ``viewType`` when
			/// loading reply threads.
			public var commentID: TopicCommentID?

			/// The sort order for the comments.
			/// By default ``CommentSortOrder/ascending``.
			public var sort: CommentSortOrder?

			/// Whether to return information about likes.
			public var needLikes: Bool?
			private let extended: Bool = true

			/// A list of user and group profile fields to be returned.
			public var fields: [ActorField]?

			public init(
				topicID: BoardTopicID,
				viewType: CommentView? = nil,
				offset: Int? = nil,
				count: Int? = nil,
				secondaryCount: Int? = nil,
				commentID: TopicCommentID? = nil,
				sort: CommentSortOrder? = nil,
				needLikes: Bool? = nil,
				fields: [ActorField]? = nil,
			) {
				self.topicID = topicID
				self.viewType = viewType
				self.offset = offset
				self.count = count
				self.secondaryCount = secondaryCount
				self.commentID = commentID
				self.sort = sort
				self.needLikes = needLikes
				self.fields = fields
			}

			private enum CodingKeys: String, CodingKey {
				case topicID = "topic_id"
				case viewType = "view_type"
				case offset
				case count
				case secondaryCount = "secondary_count"
				case commentID = "comment_id"
				case sort
				case needLikes = "need_likes"
				case extended
				case fields
			}
			public var path: String {
				"/api/method/board.getComments"
			}
			public static var method: HTTPMethod {
				.post
			}
			public var encodableBody: Self? {
				self
			}
			public typealias Result = PaginatedList<TopicComment, PaginatedListExtras.CommentViewWithProfilesAndGroups>
		}

		public init(
			topicID: BoardTopicID,
			viewType: CommentView? = nil,
			offset: Int? = nil,
			count: Int? = nil,
			secondaryCount: Int? = nil,
			commentID: TopicCommentID? = nil,
			sort: CommentSortOrder? = nil,
			needLikes: Bool? = nil,
		) {
			self.topicID = topicID
			self.viewType = viewType
			self.offset = offset
			self.count = count
			self.secondaryCount = secondaryCount
			self.commentID = commentID
			self.sort = sort
			self.needLikes = needLikes
		}

		private enum CodingKeys: String, CodingKey {
			case topicID = "topic_id"
			case viewType = "view_type"
			case offset
			case count
			case secondaryCount = "secondary_count"
			case commentID = "comment_id"
			case sort
			case needLikes = "need_likes"
		}
		public var path: String {
			"/api/method/board.getComments"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
		public typealias Result = PaginatedList<TopicComment, PaginatedListExtras.CommentView>

		public func extended(fields: [ActorField]? = nil) -> Extended {
			Extended(
				topicID: topicID,
				viewType: viewType,
				offset: offset,
				count: count,
				secondaryCount: secondaryCount,
				commentID: commentID,
				sort: sort,
				needLikes: needLikes,
				fields: fields,
			)
		}
	}
}