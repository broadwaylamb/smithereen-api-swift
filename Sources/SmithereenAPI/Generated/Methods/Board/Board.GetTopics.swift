// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Board {

	/// Returns the list of topics in a group’s discussion board.
	/// Accessing topics in private or closed groups requires the `groups:read`
	/// permission.
	public struct GetTopics: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// The group for which topics need to be returned.
		public var groupID: GroupID

		/// Sort order for the topics. Pinned topics, if any, will always
		/// be returned first regardless of this parameter.
		/// By default ``Order/updatedDescending``.
		public var order: Order?

		public enum Order: String, Codable, Sendable, CaseIterable {

			/// By last post time, newest to oldest.
			case updatedDescending = "updated_desc"

			/// By creation time, newest to oldest.
			case createdDescending = "created_desc"

			/// By last post time, oldest to newest.
			case updatedAscending = "updated_asc"

			/// By creation time, oldest to newest.
			case createdAscending = "created_asc"
		}

		/// Offset into the topic list for pagination.
		public var offset: Int?

		/// How many topics to return. By default 40.
		public var count: Int?

		/// Comment preview mode.
		/// By default ``TopicCommentPreviewMode/none``.
		public var preview: TopicCommentPreviewMode?

		/// If ``preview`` is not ``CommentPreviewMode/none``, how many
		/// characters of the comment text to return.
		/// The text will be truncated on a word boundary.
		/// Pass 0 to return complete texts.
		/// By default 90.
		public var previewLength: Int?

		/// Returns the list of topics in a group’s discussion board.
		/// Accessing topics in private or closed groups requires the `groups:read`
		/// permission.
		public struct Extended: SmithereenAPIRequest, Hashable, Encodable, Sendable {

			/// The group for which topics need to be returned.
			public var groupID: GroupID

			/// Sort order for the topics. Pinned topics, if any, will always
			/// be returned first regardless of this parameter.
			/// By default ``Order/updatedDescending``.
			public var order: Order?

			/// Offset into the topic list for pagination.
			public var offset: Int?

			/// How many topics to return. By default 40.
			public var count: Int?

			/// Comment preview mode.
			/// By default ``TopicCommentPreviewMode/none``.
			public var preview: TopicCommentPreviewMode?

			/// If ``preview`` is not ``CommentPreviewMode/none``, how many
			/// characters of the comment text to return.
			/// The text will be truncated on a word boundary.
			/// Pass 0 to return complete texts.
			/// By default 90.
			public var previewLength: Int?
			private let extended: Bool = true

			/// A list of ``User`` profile fields to be returned.
			public var fields: [User.Field]?

			public init(
				groupID: GroupID,
				order: Order? = nil,
				offset: Int? = nil,
				count: Int? = nil,
				preview: TopicCommentPreviewMode? = nil,
				previewLength: Int? = nil,
				fields: [User.Field]? = nil,
			) {
				self.groupID = groupID
				self.order = order
				self.offset = offset
				self.count = count
				self.preview = preview
				self.previewLength = previewLength
				self.fields = fields
			}

			private enum CodingKeys: String, CodingKey {
				case groupID = "group_id"
				case order
				case offset
				case count
				case preview
				case previewLength = "preview_length"
				case extended
				case fields
			}
			public var path: String {
				"/api/method/board.getTopics"
			}
			public static var method: HTTPMethod {
				.post
			}
			public var encodableBody: Self? {
				self
			}
			public typealias Result = PaginatedList<BoardTopic, PaginatedListExtras.Profiles>
		}

		public init(
			groupID: GroupID,
			order: Order? = nil,
			offset: Int? = nil,
			count: Int? = nil,
			preview: TopicCommentPreviewMode? = nil,
			previewLength: Int? = nil,
		) {
			self.groupID = groupID
			self.order = order
			self.offset = offset
			self.count = count
			self.preview = preview
			self.previewLength = previewLength
		}

		private enum CodingKeys: String, CodingKey {
			case groupID = "group_id"
			case order
			case offset
			case count
			case preview
			case previewLength = "preview_length"
		}
		public var path: String {
			"/api/method/board.getTopics"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
		public typealias Result = PaginatedList<BoardTopic, PaginatedListExtras.Empty>

		public func extended(fields: [User.Field]? = nil) -> Extended {
			Extended(
				groupID: groupID,
				order: order,
				offset: offset,
				count: count,
				preview: preview,
				previewLength: previewLength,
				fields: fields,
			)
		}
	}
}