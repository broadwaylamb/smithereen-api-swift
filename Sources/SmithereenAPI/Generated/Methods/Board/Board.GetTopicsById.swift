// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Board {

	/// Returns discussion board topics by their identifiers.
	/// Accessing topics in private or closed groups requires the `groups:read`
	/// permission.
	public struct GetTopicsById: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// A list of topic identifiers.
		public var topicIDs: [BoardTopicID]

		/// Comment preview mode.
		/// By default ``TopicCommentPreviewMode/none``.
		public var preview: TopicCommentPreviewMode?

		/// If ``preview`` is not ``TopicCommentPreviewMode/none``, how many
		/// characters of the comment text to return.
		/// The text will be truncated on a word boundary.
		/// Pass 0 to return complete texts.
		/// By default 90.
		public var previewLength: Int?

		/// Returns discussion board topics by their identifiers.
		/// Accessing topics in private or closed groups requires the `groups:read`
		/// permission.
		public struct Extended: SmithereenAPIRequest, Hashable, Encodable, Sendable {

			/// A list of topic identifiers.
			public var topicIDs: [BoardTopicID]

			/// Comment preview mode.
			/// By default ``TopicCommentPreviewMode/none``.
			public var preview: TopicCommentPreviewMode?

			/// If ``preview`` is not ``TopicCommentPreviewMode/none``, how many
			/// characters of the comment text to return.
			/// The text will be truncated on a word boundary.
			/// Pass 0 to return complete texts.
			/// By default 90.
			public var previewLength: Int?
			private let extended: Bool = true

			/// A list of ``User`` profile fields to be returned.
			public var fields: [User.Field]?

			public struct Result: Hashable, Codable, Sendable {
				public var profiles: [User]
				public var items: [BoardTopic]

				public init(
					profiles: [User],
					items: [BoardTopic],
				) {
					self.profiles = profiles
					self.items = items
				}
			}

			public init(
				topicIDs: [BoardTopicID],
				preview: TopicCommentPreviewMode? = nil,
				previewLength: Int? = nil,
				fields: [User.Field]? = nil,
			) {
				self.topicIDs = topicIDs
				self.preview = preview
				self.previewLength = previewLength
				self.fields = fields
			}

			private enum CodingKeys: String, CodingKey {
				case topicIDs = "topic_ids"
				case preview
				case previewLength = "preview_length"
				case extended
				case fields
			}
			public var path: String {
				"/api/method/board.getTopicsById"
			}
			public static var method: HTTPMethod {
				.post
			}
			public var encodableBody: Self? {
				self
			}
		}

		public init(
			topicIDs: [BoardTopicID],
			preview: TopicCommentPreviewMode? = nil,
			previewLength: Int? = nil,
		) {
			self.topicIDs = topicIDs
			self.preview = preview
			self.previewLength = previewLength
		}

		private enum CodingKeys: String, CodingKey {
			case topicIDs = "topic_ids"
			case preview
			case previewLength = "preview_length"
		}
		public var path: String {
			"/api/method/board.getTopicsById"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
		public typealias Result = [BoardTopic]

		public func extended(fields: [User.Field]? = nil) -> Extended {
			Extended(
				topicIDs: topicIDs,
				preview: preview,
				previewLength: previewLength,
				fields: fields,
			)
		}
	}
}