// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Friends {

	/// Sends a friend request, accepts an incoming friend request,
	/// or follows a user.
	/// - Note: This method requires the following permissions: `friends`.
	public struct Add: SmithereenAPIRequest, Hashable, Encodable {

		/// The identifier of the target user.
		public var userID: UserID

		/// If sending a friend request, the message to send along with it.
		public var text: String?

		public struct Result: Hashable, RawRepresentable, CaseIterable, Codable, Sendable {
			public var rawValue: String
			public init(rawValue: String) {
				self.rawValue = rawValue
			}

			/// A friend request was sent.
			public static let requestSent = Self(rawValue: "request_sent")

			/// An incoming friend request was accepted, or the target user
			/// was following the current user and theyâ€™re now friends.
			public static let requestAccepted = Self(rawValue: "request_accepted")

			/// The current user was added as a follower of the target user
			/// without sending a friend request
			public static let followed = Self(rawValue: "followed")

			public static let allCases: [Result] = [
				.requestSent,
				.requestAccepted,
				.followed,
			]

			public init(from decoder: Decoder) throws {
				let container = try decoder.singleValueContainer()
				do {
					self = Self(rawValue: try container.decode(String.self))
				} catch DecodingError.typeMismatch {
					let intValue = try container.decode(Int.self)
					switch intValue {
					case 1:
						self = .requestSent
					case 2:
						self = .requestAccepted
					default:
						self = Self(rawValue: String(intValue))
					}
				}
			}
		}

		public init(
			userID: UserID,
			text: String? = nil,
		) {
			self.userID = userID
			self.text = text
		}

		private enum CodingKeys: String, CodingKey {
			case userID = "user_id"
			case text
		}
		public var path: String {
			"/api/method/friends.add"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self {
			self
		}
	}
}