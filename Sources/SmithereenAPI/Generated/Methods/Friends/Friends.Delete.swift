// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Friends {

	/// Unfriends or unfollows a user. If there’s an outgoing friend request,
	/// cancels it. If there’s an incoming friend request, rejects it,
	/// same as the “leave as a follower” button on the web.
	/// - Note: This method requires the following permissions: `friends`.
	public struct Delete: SmithereenAPIRequest, Hashable, Encodable, Sendable {
		public var userID: UserID?

		public struct Result: Hashable, RawRepresentable, CaseIterable, Codable, Sendable {
			public var rawValue: String
			public init(rawValue: String) {
				self.rawValue = rawValue
			}

			/// The target user was the current user’s friend and was
			/// removed from the friend list.
			public static let friendDeleted = Self(rawValue: "friend_deleted")

			/// The current user was non-mutually following the target user,
			/// but there was no outgoing friend request.
			public static let unfollowed = Self(rawValue: "unfollowed")

			/// There was an outgoing friend request and it was deleted.
			public static let outRequestDeleted = Self(rawValue: "out_request_deleted")

			/// There was an incoming friend request and it was deleted.
			public static let inRequestDeleted = Self(rawValue: "in_request_deleted")

			public static let allCases: [Result] = [
				.friendDeleted,
				.unfollowed,
				.outRequestDeleted,
				.inRequestDeleted,
			]

			public init(from decoder: Decoder) throws {
				let container = try decoder.singleValueContainer()
				do {
					self = Self(rawValue: try container.decode(String.self))
				} catch DecodingError.typeMismatch {
					let intValue = try container.decode(Int.self)
					switch intValue {
					case 1:
						self = .friendDeleted
					case 2:
						self = .inRequestDeleted
					default:
						self = Self(rawValue: String(intValue))
					}
				}
			}
		}

		public init(userID: UserID? = nil) {
			self.userID = userID
		}

		private enum CodingKeys: String, CodingKey {
			case userID = "user_id"
		}
		public var path: String {
			"/api/method/friends.delete"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
	}
}