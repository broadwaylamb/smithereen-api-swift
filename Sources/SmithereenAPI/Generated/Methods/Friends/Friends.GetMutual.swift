// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Friends {

	/// Returns the list of mutual friends between two users.
	/// 
	/// - Note: This method requires the following permissions: `friends:read`.
	public struct GetMutual: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// Identifier of the user whose friend list needs to be intersected
		/// with ``targetUserID``. By default, the current user ID.
		public var sourceUserID: UserID?

		/// Identifier of the user with whom mutual friends need to be
		/// found.
		public var targetUserID: UserID

		/// In which order to return the friends. By default ``Order/id``.
		public var order: Order?

		public enum Order: String, Codable, Sendable, CaseIterable {

			/// Order randomly.
			case random

			/// Order by user identifiers.
			case id
		}

		/// Offset into the friend list for pagination.
		public var offset: Int?

		/// How many friends to return.
		/// 
		/// Minumum value: 1. Maximum value: 1000. By default 100.
		public var count: Int?

		/// Returns the list of mutual friends between two users.
		/// 
		/// - Note: This method requires the following permissions: `friends:read`.
		public struct WithFields: SmithereenAPIRequest, Hashable, Encodable, Sendable {

			/// Identifier of the user whose friend list needs to be intersected
			/// with ``targetUserID``. By default, the current user ID.
			public var sourceUserID: UserID?

			/// Identifier of the user with whom mutual friends need to be
			/// found.
			public var targetUserID: UserID

			/// In which order to return the friends. By default ``Order/id``.
			public var order: Order?

			/// Offset into the friend list for pagination.
			public var offset: Int?

			/// How many friends to return.
			/// 
			/// Minumum value: 1. Maximum value: 1000. By default 100.
			public var count: Int?

			/// A list of ``User`` profile fields to be returned.
			public var fields: [User.Field]

			public init(
				sourceUserID: UserID? = nil,
				targetUserID: UserID,
				order: Order? = nil,
				offset: Int? = nil,
				count: Int? = nil,
				fields: [User.Field],
			) {
				self.sourceUserID = sourceUserID
				self.targetUserID = targetUserID
				self.order = order
				self.offset = offset
				self.count = count
				self.fields = fields
			}

			private enum CodingKeys: String, CodingKey {
				case sourceUserID = "source_user_id"
				case targetUserID = "target_user_id"
				case order
				case offset
				case count
				case fields
			}
			public var path: String {
				"/api/method/friends.getMutual"
			}
			public static var method: HTTPMethod {
				.post
			}
			public var encodableBody: Self? {
				self
			}
			public typealias Result = PaginatedList<User, PaginatedListExtras.Empty>
		}

		public init(
			sourceUserID: UserID? = nil,
			targetUserID: UserID,
			order: Order? = nil,
			offset: Int? = nil,
			count: Int? = nil,
		) {
			self.sourceUserID = sourceUserID
			self.targetUserID = targetUserID
			self.order = order
			self.offset = offset
			self.count = count
		}

		private enum CodingKeys: String, CodingKey {
			case sourceUserID = "source_user_id"
			case targetUserID = "target_user_id"
			case order
			case offset
			case count
		}
		public var path: String {
			"/api/method/friends.getMutual"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
		public typealias Result = [UserID]

		public func withFields(fields: [User.Field]) -> WithFields {
			WithFields(
				sourceUserID: sourceUserID,
				targetUserID: targetUserID,
				order: order,
				offset: offset,
				count: count,
				fields: fields,
			)
		}
	}
}