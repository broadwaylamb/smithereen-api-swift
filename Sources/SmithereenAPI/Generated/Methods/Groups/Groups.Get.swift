// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Groups {

	/// Returns the list of groups or events in which a user is a member.
	public struct Get: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// User identifier for which to return groups.
		/// Current user ID by default, required if not using a token.
		public var userID: UserID?

		/// A list of filters determining what kinds of communities
		/// to return.
		/// 
		/// Events and filtering by admin level require a token and only
		/// apply for the current user and require
		/// the `groups:read` permission.
		public var filter: [Filter]?

		public enum Filter: String, Codable, Sendable, CaseIterable {

			/// Only return communities where the user is an administrator.
			case admin

			/// Only return communities where the user is a moderator
			/// or an administrator.
			case moder

			/// Only return groups
			case groups

			/// only return events
			case events
		}

		/// Offset into the group list for pagination.
		public var offset: Int?

		/// How many groups to return.
		/// 
		/// Minumum value: 1. Maximum value: 1000. By default 100.
		public var count: Int?

		/// Returns the list of groups or events in which a user is a member.
		public struct WithFields: SmithereenAPIRequest, Hashable, Encodable, Sendable {

			/// User identifier for which to return groups.
			/// Current user ID by default, required if not using a token.
			public var userID: UserID?

			/// A list of filters determining what kinds of communities
			/// to return.
			/// 
			/// Events and filtering by admin level require a token and only
			/// apply for the current user and require
			/// the `groups:read` permission.
			public var filter: [Filter]?

			/// Offset into the group list for pagination.
			public var offset: Int?

			/// How many groups to return.
			/// 
			/// Minumum value: 1. Maximum value: 1000. By default 100.
			public var count: Int?

			/// A list of ``Group`` profile fields to be returned.
			public var fields: [Group.Field]

			/// - parameters:
			///   - userID: User identifier for which to return groups.
			///     Current user ID by default, required if not using a token.
			///   - filter: A list of filters determining what kinds of communities
			///     to return.
			///     
			///     Events and filtering by admin level require a token and only
			///     apply for the current user and require
			///     the `groups:read` permission.
			///   - offset: Offset into the group list for pagination.
			///   - count: How many groups to return.
			///     
			///     Minumum value: 1. Maximum value: 1000. By default 100.
			///   - fields: A list of ``Group`` profile fields to be returned.
			public init(
				userID: UserID? = nil,
				filter: [Filter]? = nil,
				offset: Int? = nil,
				count: Int? = nil,
				fields: [Group.Field],
			) {
				self.userID = userID
				self.filter = filter
				self.offset = offset
				self.count = count
				self.fields = fields
			}

			private enum CodingKeys: String, CodingKey {
				case userID = "user_id"
				case filter
				case offset
				case count
				case fields
			}
			public var path: String {
				"/api/method/groups.get"
			}
			public static var method: HTTPMethod {
				.post
			}
			public var encodableBody: Self? {
				self
			}
			public typealias Result = PaginatedList<Group, PaginatedListExtras.Empty>
		}

		/// - parameters:
		///   - userID: User identifier for which to return groups.
		///     Current user ID by default, required if not using a token.
		///   - filter: A list of filters determining what kinds of communities
		///     to return.
		///     
		///     Events and filtering by admin level require a token and only
		///     apply for the current user and require
		///     the `groups:read` permission.
		///   - offset: Offset into the group list for pagination.
		///   - count: How many groups to return.
		///     
		///     Minumum value: 1. Maximum value: 1000. By default 100.
		public init(
			userID: UserID? = nil,
			filter: [Filter]? = nil,
			offset: Int? = nil,
			count: Int? = nil,
		) {
			self.userID = userID
			self.filter = filter
			self.offset = offset
			self.count = count
		}

		private enum CodingKeys: String, CodingKey {
			case userID = "user_id"
			case filter
			case offset
			case count
		}
		public var path: String {
			"/api/method/groups.get"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
		public typealias Result = PaginatedList<GroupID, PaginatedListExtras.Empty>

		public func withFields(fields: [Group.Field]) -> WithFields {
			WithFields(
				userID: userID,
				filter: filter,
				offset: offset,
				count: count,
				fields: fields,
			)
		}
	}
}