// This file is automatically generated. DO NOT EDIT!
// Generated from: codegen/Sources/Schema/Methods/Newsfeed.swift

import Foundation
import SmithereenAPIInternals
import Hammond
extension Newsfeed {

	/// Returns the word filters the current user has set up for their
	/// news feeds.
	/// 
	/// You do **not** need to apply the filters client-side.
	/// The server will return `matchedFilter` in ``WallPostNewsfeedUpdate``
	/// for any posts that match a filter. Your app then only needs to render
	/// some sort of placeholder, displaying the filter name, and optionally
	/// letting the user see the post anyway.
	/// 
	/// - Note: This method requires the following permissions: `newsfeed`.
	public struct GetFilters: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// Whether to also return expired filters.
		/// 
		/// By default `false`.
		public var includeExpired: Bool?

		public struct WordFilter: Hashable, Codable, Sendable, Identifiable {

			/// Identifier of the filter.
			public var id: WordFilterID

			/// The user-visible name of the filter.
			public var name: String

			/// Words (case-insensitive) that match this filter.
			public var words: [String]

			/// Which contexts this filter applies in.
			public var contexts: [WordFilterContext]

			/// If this filter is temporary, the time when it expires.
			@UnixTimestamp
			public var expiryDate: Date?

			/// - parameters:
			///   - id: Identifier of the filter.
			///   - name: The user-visible name of the filter.
			///   - words: Words (case-insensitive) that match this filter.
			///   - contexts: Which contexts this filter applies in.
			///   - expiryDate: If this filter is temporary, the time when it expires.
			public init(
				id: WordFilterID,
				name: String,
				words: [String],
				contexts: [WordFilterContext],
				expiryDate: Date? = nil,
			) {
				self.id = id
				self.name = name
				self.words = words
				self.contexts = contexts
				self.expiryDate = expiryDate
			}

			private enum CodingKeys: String, CodingKey {
				case id
				case name
				case words
				case contexts
				case expiryDate = "expiry_date"
			}
		}

		/// - parameters:
		///   - includeExpired: Whether to also return expired filters.
		///     
		///     By default `false`.
		public init(includeExpired: Bool? = nil) {
			self.includeExpired = includeExpired
		}

		private enum CodingKeys: String, CodingKey {
			case includeExpired = "include_expired"
		}
		public var path: String {
			"/api/method/newsfeed.getFilters"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
		public typealias Result = [WordFilter]
	}
}