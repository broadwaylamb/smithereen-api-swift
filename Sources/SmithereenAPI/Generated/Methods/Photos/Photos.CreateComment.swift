// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Photos {

	/// Creates a new comment on a photo.
	/// Returns the identifier of the newly created comment.
	/// - Note: This method requires the following permissions: `photos`.
	public struct CreateComment: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// Identifier of the photo on which to comment.
		public var photoID: PhotoID

		/// Identifier of the comment to reply to.
		public var replyToComment: PhotoCommentID?

		/// The text of the comment.
		/// **Required** if there are no ``attachments``.
		/// This parameter supports formatted text, the format is
		/// determined by the ``textFormat`` parameter.
		public var message: String?

		/// The format of the comment text passed in ``message``.
		/// By default, the userâ€™s preference is used.
		public var textFormat: TextFormat?

		/// An array representing the media attachments to be added to this comment.
		/// **Required** if there is no ``message``.
		@EncodeAsJSONString
		public var attachments: [AttachmentToCreate]?

		/// If this is not empty, make the content of the comment hidden
		/// by default, requiring a click to reveal.
		/// This text will be shown instead of the content.
		public var contentWarning: String?

		/// A unique identifier used to prevent accidental double-posting
		/// on unreliable connections.
		/// If ``Photos/createComment`` was previously called with this
		/// ``guid`` in the last hour, no new comment will be created,
		/// the ID of that previously created comment will be returned
		/// instead. Recommended for mobile apps.
		public var guid: UUID?

		public init(
			photoID: PhotoID,
			replyToComment: PhotoCommentID? = nil,
			message: String? = nil,
			textFormat: TextFormat? = nil,
			attachments: [AttachmentToCreate]? = nil,
			contentWarning: String? = nil,
			guid: UUID? = nil,
		) {
			self.photoID = photoID
			self.replyToComment = replyToComment
			self.message = message
			self.textFormat = textFormat
			self.attachments = attachments
			self.contentWarning = contentWarning
			self.guid = guid
		}

		private enum CodingKeys: String, CodingKey {
			case photoID = "photo_id"
			case replyToComment = "reply_to_comment"
			case message
			case textFormat = "text_format"
			case attachments
			case contentWarning = "content_warning"
			case guid
		}
		public var path: String {
			"/method/photos.createComment"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self {
			self
		}
		public typealias Result = PhotoCommentID
	}
}