// This file is automatically generated. DO NOT EDIT!
// Generated from: codegen/Sources/Schema/Methods/Photos.swift

import Foundation
import SmithereenAPIInternals
import Hammond
extension Photos {

	/// Returns tags for a photo.
	/// 
	/// Photos in non-public albums require a token and the `photos:read` permission.
	public struct GetTags: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// Identifier of the photo.
		public var photoID: PhotoID

		public struct Tag: Hashable, Codable, Sendable, Identifiable {

			/// Identifier of the tagged user. If the tag is unconfirmed or if
			/// it was created by entering a name instead of selecting a user
			/// from the friend list, this field will be absent.
			public var userID: UserID?

			/// Tag identifier.
			public var id: PhotoTagID

			/// Identifier of the user who created the tag.
			public var placerID: UserID

			/// The name of the tagged person.
			public var name: String

			/// The coordinates of the tag area.
			public var area: ImageRect

			/// When this tag was created.
			@UnixTimestamp
			public var date: Date

			/// Whether this tag was confirmed by the tagged user.
			/// `nil` iff ``userID`` is `nil`.
			public var confirmed: Bool?

			/// - parameters:
			///   - userID: Identifier of the tagged user. If the tag is unconfirmed or if
			///     it was created by entering a name instead of selecting a user
			///     from the friend list, this field will be absent.
			///   - id: Tag identifier.
			///   - placerID: Identifier of the user who created the tag.
			///   - name: The name of the tagged person.
			///   - area: The coordinates of the tag area.
			///   - date: When this tag was created.
			///   - confirmed: Whether this tag was confirmed by the tagged user.
			///     `nil` iff ``userID`` is `nil`.
			public init(
				userID: UserID? = nil,
				id: PhotoTagID,
				placerID: UserID,
				name: String,
				area: ImageRect,
				date: Date,
				confirmed: Bool? = nil,
			) {
				self.userID = userID
				self.id = id
				self.placerID = placerID
				self.name = name
				self.area = area
				self.date = date
				self.confirmed = confirmed
			}

			private enum CodingKeys: String, CodingKey {
				case userID = "user_id"
				case id
				case placerID = "placer_id"
				case name
				case date
				case confirmed
			}
			public func encode(to encoder: any Encoder) throws {
				var container = encoder.container(keyedBy: CodingKeys.self)
				try container.encodeIfPresent(self.userID, forKey: .userID)
				try container.encode(self.id, forKey: .id)
				try container.encode(self.placerID, forKey: .placerID)
				try container.encode(self.name, forKey: .name)
				try self.area.encode(to: encoder)
				try container.encode(self.date, forKey: .date)
				try container.encodeIfPresent(self.confirmed, forKey: .confirmed)
			}

			public init(from decoder: Decoder) throws {
				let container = try decoder.container(keyedBy: CodingKeys.self)
				self.userID = try container.decodeIfPresent(UserID.self, forKey: .userID)
				self.id = try container.decode(PhotoTagID.self, forKey: .id)
				self.placerID = try container.decode(UserID.self, forKey: .placerID)
				self.name = try container.decode(String.self, forKey: .name)
				self.area = try ImageRect(from: decoder)
				self.date = try container.decode(Date.self, forKey: .date)
				self.confirmed = try container.decodeIfPresent(Bool.self, forKey: .confirmed)
			}
		}

		/// - parameters:
		///   - photoID: Identifier of the photo.
		public init(photoID: PhotoID) {
			self.photoID = photoID
		}

		private enum CodingKeys: String, CodingKey {
			case photoID = "photo_id"
		}
		public var path: String {
			"/api/method/photos.getTags"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
		public typealias Result = [Tag]
	}
}