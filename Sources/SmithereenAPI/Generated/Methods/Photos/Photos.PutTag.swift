// This file is automatically generated. DO NOT EDIT!
// Generated from: codegen/Sources/Schema/Methods/Photos.swift

import Foundation
import SmithereenAPIInternals
import Hammond
extension Photos {

	/// Creates a new tag on a photo.
	/// 
	/// You can only create tags on photos owned or uploaded to a group by
	/// the current user, or owned by a group managed by the current user.
	/// 
	/// - Note: This method requires the following permissions: `photos`.
	public struct PutTag: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// Identifier of the photo.
		public var photoID: PhotoID

		/// Who to tag.
		public var taggee: Taggee

		public enum Taggee: Hashable, Encodable, Sendable {

			/// Identifier of the user to tag.
			/// The user must be the current user’s friend.
			case user(UserID)

			/// The name to tag. Pass instead of ``user(_:)`` to create a tag with
			/// just a name, without linking to anyone’s profile.
			case name(String)

			private enum CodingKeys: String, CodingKey {
				case userID = "user_id"
				case name
			}
			public func encode(to encoder: any Encoder) throws {
				var container = encoder.container(keyedBy: CodingKeys.self)
				switch self {
				case .user(let userID):
					try container.encode(userID, forKey: .userID)
				case .name(let name):
					try container.encode(name, forKey: .name)
				}
			}
		}

		/// The tag area.
		public var area: ImageRect

		/// - parameters:
		///   - photoID: Identifier of the photo.
		///   - taggee: Who to tag.
		///   - area: The tag area.
		public init(
			photoID: PhotoID,
			taggee: Taggee,
			area: ImageRect,
		) {
			self.photoID = photoID
			self.taggee = taggee
			self.area = area
		}

		private enum CodingKeys: String, CodingKey {
			case photoID = "photo_id"
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			try container.encode(self.photoID, forKey: .photoID)
			try self.taggee.encode(to: encoder)
			try self.area.encode(to: encoder)
		}
		public var path: String {
			"/api/method/photos.putTag"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self? {
			self
		}
		public typealias Result = PhotoTagID
	}
}