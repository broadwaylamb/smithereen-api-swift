// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals
import Hammond
extension Users {

	/// Returns a list of users matching search criteria.
	public struct Search: SmithereenAPIRequest, Hashable, Encodable, Sendable {

		/// The search query.
		public var query: String

		/// How many search results to return, from 1 to 100.
		/// By default 100.
		public var count: Int?

		/// Returns a list of users matching search criteria.
		public struct WithFields: SmithereenAPIRequest, Hashable, Encodable, Sendable {

			/// The search query.
			public var query: String

			/// How many search results to return, from 1 to 100.
			/// By default 100.
			public var count: Int?

			/// A list of user profile fields to be returned.
			public var fields: [User.Field]

			public init(
				query: String,
				count: Int? = nil,
				fields: [User.Field],
			) {
				self.query = query
				self.count = count
				self.fields = fields
			}

			private enum CodingKeys: String, CodingKey {
				case query = "q"
				case count
				case fields
			}
			public var path: String {
				"/api/method/users.search"
			}
			public static var method: HTTPMethod {
				.post
			}
			public var encodableBody: Self {
				self
			}
			public typealias Result = PaginatedList<User, PaginatedListExtras.Empty>
		}

		public init(
			query: String,
			count: Int? = nil,
		) {
			self.query = query
			self.count = count
		}

		private enum CodingKeys: String, CodingKey {
			case query = "q"
			case count
		}
		public var path: String {
			"/api/method/users.search"
		}
		public static var method: HTTPMethod {
			.post
		}
		public var encodableBody: Self {
			self
		}
		public typealias Result = PaginatedList<UserID, PaginatedListExtras.Empty>

		public func withFields(fields: [User.Field]) -> WithFields {
			WithFields(
				query: query,
				count: count,
				fields: fields,
			)
		}
	}
}