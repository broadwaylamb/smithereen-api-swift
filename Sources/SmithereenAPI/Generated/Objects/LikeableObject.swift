// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals

public enum LikeableObject: Hashable, Codable, Sendable {
	case post(WallPostID)
	case photo(PhotoID)
	case photoComment(PhotoCommentID)
	case topicComment(TopicCommentID)

	private enum CodingKeys: String, CodingKey {
		case type
		case itemID = "item_id"
	}

	public init(from decoder: Decoder) throws {
		let container = try decoder.container(keyedBy: CodingKeys.self)
		let type = try container.decode(String.self, forKey: .type)
		switch type {
		case "post":
			self = .post(try container.decode(WallPostID.self, forKey: .itemID))
		case "photo":
			self = .photo(try container.decode(PhotoID.self, forKey: .itemID))
		case "photo_comment":
			self = .photoComment(try container.decode(PhotoCommentID.self, forKey: .itemID))
		case "topic_comment":
			self = .topicComment(try container.decode(TopicCommentID.self, forKey: .itemID))
		default:
			throw DecodingError.dataCorruptedError(
				forKey: .type,
				in: container,
				debugDescription: "Unknown payload type",
			)
		}
	}
	public func encode(to encoder: any Encoder) throws {
		var container = encoder.container(keyedBy: CodingKeys.self)
		let tag: String
		switch self {
		case .post(let payload):
			tag = "post"
			try container.encode(payload, forKey: .itemID)
		case .photo(let payload):
			tag = "photo"
			try container.encode(payload, forKey: .itemID)
		case .photoComment(let payload):
			tag = "photo_comment"
			try container.encode(payload, forKey: .itemID)
		case .topicComment(let payload):
			tag = "topic_comment"
			try container.encode(payload, forKey: .itemID)
		}
		try container.encode(tag, forKey: .type)
	}
}