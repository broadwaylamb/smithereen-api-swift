// This file is automatically generated. DO NOT EDIT!
// Generated from: codegen/Sources/Schema/Objects/LikeableObject.swift

import Foundation
import SmithereenAPIInternals

public enum LikeableObject: Hashable, Codable, Sendable {

	/// Wall post or comment.
	case post(WallPostID)

	/// Photo.
	case photo(PhotoID)

	/// A comment on a photo.
	case photoComment(PhotoCommentID)

	/// A comment in a discussion board topic.
	case topicComment(TopicCommentID)

	private enum CodingKeys: String, CodingKey {
		case type
		case itemID = "item_id"
	}

	public init(from decoder: Decoder) throws {
		let container = try decoder.container(keyedBy: CodingKeys.self)
		let type = try container.decode(String.self, forKey: .type)
		switch type {
		case "post":
			let itemID = try container.decodeFromString(WallPostID.self, forKey: .itemID)
			self = .post(itemID)
		case "photo":
			let itemID = try container.decode(PhotoID.self, forKey: .itemID)
			self = .photo(itemID)
		case "photo_comment":
			let itemID = try container.decode(PhotoCommentID.self, forKey: .itemID)
			self = .photoComment(itemID)
		case "topic_comment":
			let itemID = try container.decode(TopicCommentID.self, forKey: .itemID)
			self = .topicComment(itemID)
		default:
			throw DecodingError.dataCorruptedError(
				forKey: .type,
				in: container,
				debugDescription: "Unknown payload type \(String(reflecting: type))",
			)
		}
	}
	public func encode(to encoder: any Encoder) throws {
		var container = encoder.container(keyedBy: CodingKeys.self)
		let tag: String
		switch self {
		case .post(let itemID):
			tag = "post"
			try container.encodeToString(itemID, forKey: .itemID)
		case .photo(let itemID):
			tag = "photo"
			try container.encode(itemID, forKey: .itemID)
		case .photoComment(let itemID):
			tag = "photo_comment"
			try container.encode(itemID, forKey: .itemID)
		case .topicComment(let itemID):
			tag = "topic_comment"
			try container.encode(itemID, forKey: .itemID)
		}
		try container.encode(tag, forKey: .type)
	}
}