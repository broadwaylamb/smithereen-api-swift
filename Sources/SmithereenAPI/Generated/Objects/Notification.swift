// This file is automatically generated. DO NOT EDIT!
// Generated from: codegen/Sources/Schema/Objects/Notification.swift

import Foundation
import SmithereenAPIInternals

public struct Notification: Hashable, Codable, Sendable, Identifiable {

	/// Identifier of this notification.
	/// The newer the notification, the greater the identifier.
	public var id: NotificationID

	public struct UserIDs: Hashable, Codable, Sendable {

		/// How many users there are total.
		public var count: Int

		/// Identifiers of the most recent 10 users.
		public var items: [UserID]

		/// - parameters:
		///   - count: How many users there are total.
		///   - items: Identifiers of the most recent 10 users.
		public init(
			count: Int,
			items: [UserID],
		) {
			self.count = count
			self.items = items
		}
	}

	/// The new comment that this notification is about.
	public enum CommentFeedback: Hashable, Codable, Sendable {
		case wallComment(WallPostID)
		case photoComment(PhotoCommentID)
		case boardComment(TopicCommentID)

		private enum CodingKeys: String, CodingKey {
			case type
			case wallCommentID = "wall_comment_id"
			case photoCommentID = "photo_comment_id"
			case boardCommentID = "board_comment_id"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "wall_comment":
				let wallCommentID = try container.decode(WallPostID.self, forKey: .wallCommentID)
				self = .wallComment(wallCommentID)
			case "photo_comment":
				let photoCommentID = try container.decode(PhotoCommentID.self, forKey: .photoCommentID)
				self = .photoComment(photoCommentID)
			case "board_comment":
				let boardCommentID = try container.decode(TopicCommentID.self, forKey: .boardCommentID)
				self = .boardComment(boardCommentID)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .wallComment(let wallCommentID):
				tag = "wall_comment"
				try container.encode(wallCommentID, forKey: .wallCommentID)
			case .photoComment(let photoCommentID):
				tag = "photo_comment"
				try container.encode(photoCommentID, forKey: .photoCommentID)
			case .boardComment(let boardCommentID):
				tag = "board_comment"
				try container.encode(boardCommentID, forKey: .boardCommentID)
			}
			try container.encode(tag, forKey: .type)
		}
	}

	/// The new post or comment that this notification is about.
	public enum MentionFeedback: Hashable, Codable, Sendable {
		case wallPost(WallPostID)
		case wallComment(WallPostID)
		case photoComment(PhotoCommentID)
		case boardComment(TopicCommentID)

		private enum CodingKeys: String, CodingKey {
			case type
			case wallPostID = "wall_post_id"
			case wallCommentID = "wall_comment_id"
			case photoCommentID = "photo_comment_id"
			case boardCommentID = "board_comment_id"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "wall_post":
				let wallPostID = try container.decode(WallPostID.self, forKey: .wallPostID)
				self = .wallPost(wallPostID)
			case "wall_comment":
				let wallCommentID = try container.decode(WallPostID.self, forKey: .wallCommentID)
				self = .wallComment(wallCommentID)
			case "photo_comment":
				let photoCommentID = try container.decode(PhotoCommentID.self, forKey: .photoCommentID)
				self = .photoComment(photoCommentID)
			case "board_comment":
				let boardCommentID = try container.decode(TopicCommentID.self, forKey: .boardCommentID)
				self = .boardComment(boardCommentID)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .wallPost(let wallPostID):
				tag = "wall_post"
				try container.encode(wallPostID, forKey: .wallPostID)
			case .wallComment(let wallCommentID):
				tag = "wall_comment"
				try container.encode(wallCommentID, forKey: .wallCommentID)
			case .photoComment(let photoCommentID):
				tag = "photo_comment"
				try container.encode(photoCommentID, forKey: .photoCommentID)
			case .boardComment(let boardCommentID):
				tag = "board_comment"
				try container.encode(boardCommentID, forKey: .boardCommentID)
			}
			try container.encode(tag, forKey: .type)
		}
	}

	/// The new post that this notification is about.
	public enum WallPostFeedback: Hashable, Codable, Sendable {
		case wallPost(WallPostID)

		private enum CodingKeys: String, CodingKey {
			case type
			case wallPostID = "wall_post_id"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "wall_post":
				let wallPostID = try container.decode(WallPostID.self, forKey: .wallPostID)
				self = .wallPost(wallPostID)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .wallPost(let wallPostID):
				tag = "wall_post"
				try container.encode(wallPostID, forKey: .wallPostID)
			}
			try container.encode(tag, forKey: .type)
		}
	}

	/// The current user's object that on which someone commented.
	public enum CommentObject: Hashable, Codable, Sendable {
		case wallPost(WallPostID)
		case boardComment(TopicCommentID)
		case photo(PhotoID)

		private enum CodingKeys: String, CodingKey {
			case type
			case wallPostID = "wall_post_id"
			case boardCommentID = "board_comment_id"
			case photoID = "photo_id"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "wall_post":
				let wallPostID = try container.decode(WallPostID.self, forKey: .wallPostID)
				self = .wallPost(wallPostID)
			case "board_comment":
				let boardCommentID = try container.decode(TopicCommentID.self, forKey: .boardCommentID)
				self = .boardComment(boardCommentID)
			case "photo":
				let photoID = try container.decode(PhotoID.self, forKey: .photoID)
				self = .photo(photoID)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .wallPost(let wallPostID):
				tag = "wall_post"
				try container.encode(wallPostID, forKey: .wallPostID)
			case .boardComment(let boardCommentID):
				tag = "board_comment"
				try container.encode(boardCommentID, forKey: .boardCommentID)
			case .photo(let photoID):
				tag = "photo"
				try container.encode(photoID, forKey: .photoID)
			}
			try container.encode(tag, forKey: .type)
		}
	}

	/// The current user's comment to which someone replied.
	public enum ReplyObject: Hashable, Codable, Sendable {
		case wallComment(WallPostID)
		case photoComment(PhotoCommentID)
		case boardComment(TopicCommentID)

		private enum CodingKeys: String, CodingKey {
			case type
			case wallCommentID = "wall_comment_id"
			case photoCommentID = "photo_comment_id"
			case boardCommentID = "board_comment_id"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "wall_comment":
				let wallCommentID = try container.decode(WallPostID.self, forKey: .wallCommentID)
				self = .wallComment(wallCommentID)
			case "photo_comment":
				let photoCommentID = try container.decode(PhotoCommentID.self, forKey: .photoCommentID)
				self = .photoComment(photoCommentID)
			case "board_comment":
				let boardCommentID = try container.decode(TopicCommentID.self, forKey: .boardCommentID)
				self = .boardComment(boardCommentID)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .wallComment(let wallCommentID):
				tag = "wall_comment"
				try container.encode(wallCommentID, forKey: .wallCommentID)
			case .photoComment(let photoCommentID):
				tag = "photo_comment"
				try container.encode(photoCommentID, forKey: .photoCommentID)
			case .boardComment(let boardCommentID):
				tag = "board_comment"
				try container.encode(boardCommentID, forKey: .boardCommentID)
			}
			try container.encode(tag, forKey: .type)
		}
	}

	/// The current user's object that someone liked.
	public enum LikeObject: Hashable, Codable, Sendable {
		case wallPost(WallPostID)
		case wallComment(WallPostID)
		case photoComment(PhotoCommentID)
		case boardComment(TopicCommentID)
		case photo(PhotoID)

		private enum CodingKeys: String, CodingKey {
			case type
			case wallPostID = "wall_post_id"
			case wallCommentID = "wall_comment_id"
			case photoCommentID = "photo_comment_id"
			case boardCommentID = "board_comment_id"
			case photoID = "photo_id"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "wall_post":
				let wallPostID = try container.decode(WallPostID.self, forKey: .wallPostID)
				self = .wallPost(wallPostID)
			case "wall_comment":
				let wallCommentID = try container.decode(WallPostID.self, forKey: .wallCommentID)
				self = .wallComment(wallCommentID)
			case "photo_comment":
				let photoCommentID = try container.decode(PhotoCommentID.self, forKey: .photoCommentID)
				self = .photoComment(photoCommentID)
			case "board_comment":
				let boardCommentID = try container.decode(TopicCommentID.self, forKey: .boardCommentID)
				self = .boardComment(boardCommentID)
			case "photo":
				let photoID = try container.decode(PhotoID.self, forKey: .photoID)
				self = .photo(photoID)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .wallPost(let wallPostID):
				tag = "wall_post"
				try container.encode(wallPostID, forKey: .wallPostID)
			case .wallComment(let wallCommentID):
				tag = "wall_comment"
				try container.encode(wallCommentID, forKey: .wallCommentID)
			case .photoComment(let photoCommentID):
				tag = "photo_comment"
				try container.encode(photoCommentID, forKey: .photoCommentID)
			case .boardComment(let boardCommentID):
				tag = "board_comment"
				try container.encode(boardCommentID, forKey: .boardCommentID)
			case .photo(let photoID):
				tag = "photo"
				try container.encode(photoID, forKey: .photoID)
			}
			try container.encode(tag, forKey: .type)
		}
	}

	/// The current user's wall post or comment that someone reposted.
	public enum RepostObject: Hashable, Codable, Sendable {
		case wallPost(WallPostID)
		case wallComment(WallPostID)

		private enum CodingKeys: String, CodingKey {
			case type
			case wallPostID = "wall_post_id"
			case wallCommentID = "wall_comment_id"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "wall_post":
				let wallPostID = try container.decode(WallPostID.self, forKey: .wallPostID)
				self = .wallPost(wallPostID)
			case "wall_comment":
				let wallCommentID = try container.decode(WallPostID.self, forKey: .wallCommentID)
				self = .wallComment(wallCommentID)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .wallPost(let wallPostID):
				tag = "wall_post"
				try container.encode(wallPostID, forKey: .wallPostID)
			case .wallComment(let wallCommentID):
				tag = "wall_comment"
				try container.encode(wallCommentID, forKey: .wallCommentID)
			}
			try container.encode(tag, forKey: .type)
		}
	}

	public enum Parent: Hashable, Codable, Sendable {
		case wallPost(WallPostID)
		case photo(PhotoID)
		case boardTopic(BoardTopicID)

		private enum CodingKeys: String, CodingKey {
			case type
			case wallPostID = "wall_post_id"
			case photoID = "photo_id"
			case boardTopicID = "board_topic_id"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "wall_post":
				let wallPostID = try container.decode(WallPostID.self, forKey: .wallPostID)
				self = .wallPost(wallPostID)
			case "photo":
				let photoID = try container.decode(PhotoID.self, forKey: .photoID)
				self = .photo(photoID)
			case "board_topic":
				let boardTopicID = try container.decode(BoardTopicID.self, forKey: .boardTopicID)
				self = .boardTopic(boardTopicID)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .wallPost(let wallPostID):
				tag = "wall_post"
				try container.encode(wallPostID, forKey: .wallPostID)
			case .photo(let photoID):
				tag = "photo"
				try container.encode(photoID, forKey: .photoID)
			case .boardTopic(let boardTopicID):
				tag = "board_topic"
				try container.encode(boardTopicID, forKey: .boardTopicID)
			}
			try container.encode(tag, forKey: .type)
		}
	}
	public var payload: Payload

	public enum Payload: Hashable, Codable, Sendable {

		/// Someone commented on a piece of content created by
		/// the current user.
		case comment(userID: UserID, feedback: CommentFeedback, object: CommentObject)

		/// Someone replied to a current user's comment.
		case reply(userID: UserID, feedback: CommentFeedback, object: ReplyObject)

		/// Someone mentioned the current user.
		case mention(userID: UserID, feedback: MentionFeedback)

		/// Someone reposted a current user's post or comment.
		case repost(userIDs: UserIDs, object: RepostObject)

		/// Someone liked a piece of content created by
		/// the current user.
		case like(userIDs: UserIDs, object: LikeObject)

		/// Someone posted on the current user's wall.
		case wallPost(userID: UserID, feedback: WallPostFeedback)

		/// Someone signed up using an invitation from
		/// the current user.
		case inviteSignup(userIDs: UserIDs)

		/// Someone started following the current user.
		case follow(userIDs: UserIDs)

		/// Someone accepted a current user's friend request.
		case friendAccept(userIDs: UserIDs)

		private enum CodingKeys: String, CodingKey {
			case type
			case userID = "user_id"
			case feedback
			case object
			case userIDs = "user_ids"
		}

		public init(from decoder: Decoder) throws {
			let container = try decoder.container(keyedBy: CodingKeys.self)
			let type = try container.decode(String.self, forKey: .type)
			switch type {
			case "comment":
				let userID = try container.decode(UserID.self, forKey: .userID)
				let feedback = try container.decode(CommentFeedback.self, forKey: .feedback)
				let object = try container.decode(CommentObject.self, forKey: .object)
				self = .comment(userID: userID, feedback: feedback, object: object)
			case "reply":
				let userID = try container.decode(UserID.self, forKey: .userID)
				let feedback = try container.decode(CommentFeedback.self, forKey: .feedback)
				let object = try container.decode(ReplyObject.self, forKey: .object)
				self = .reply(userID: userID, feedback: feedback, object: object)
			case "mention":
				let userID = try container.decode(UserID.self, forKey: .userID)
				let feedback = try container.decode(MentionFeedback.self, forKey: .feedback)
				self = .mention(userID: userID, feedback: feedback)
			case "repost":
				let userIDs = try container.decode(UserIDs.self, forKey: .userIDs)
				let object = try container.decode(RepostObject.self, forKey: .object)
				self = .repost(userIDs: userIDs, object: object)
			case "like":
				let userIDs = try container.decode(UserIDs.self, forKey: .userIDs)
				let object = try container.decode(LikeObject.self, forKey: .object)
				self = .like(userIDs: userIDs, object: object)
			case "wall_post":
				let userID = try container.decode(UserID.self, forKey: .userID)
				let feedback = try container.decode(WallPostFeedback.self, forKey: .feedback)
				self = .wallPost(userID: userID, feedback: feedback)
			case "invite_signup":
				let userIDs = try container.decode(UserIDs.self, forKey: .userIDs)
				self = .inviteSignup(userIDs: userIDs)
			case "follow":
				let userIDs = try container.decode(UserIDs.self, forKey: .userIDs)
				self = .follow(userIDs: userIDs)
			case "friend_accept":
				let userIDs = try container.decode(UserIDs.self, forKey: .userIDs)
				self = .friendAccept(userIDs: userIDs)
			default:
				throw DecodingError.dataCorruptedError(
					forKey: .type,
					in: container,
					debugDescription: "Unknown payload type \(String(reflecting: type))",
				)
			}
		}
		public func encode(to encoder: any Encoder) throws {
			var container = encoder.container(keyedBy: CodingKeys.self)
			let tag: String
			switch self {
			case .comment(let userID, let feedback, let object):
				tag = "comment"
				try container.encode(userID, forKey: .userID)
				try container.encode(feedback, forKey: .feedback)
				try container.encode(object, forKey: .object)
			case .reply(let userID, let feedback, let object):
				tag = "reply"
				try container.encode(userID, forKey: .userID)
				try container.encode(feedback, forKey: .feedback)
				try container.encode(object, forKey: .object)
			case .mention(let userID, let feedback):
				tag = "mention"
				try container.encode(userID, forKey: .userID)
				try container.encode(feedback, forKey: .feedback)
			case .repost(let userIDs, let object):
				tag = "repost"
				try container.encode(userIDs, forKey: .userIDs)
				try container.encode(object, forKey: .object)
			case .like(let userIDs, let object):
				tag = "like"
				try container.encode(userIDs, forKey: .userIDs)
				try container.encode(object, forKey: .object)
			case .wallPost(let userID, let feedback):
				tag = "wall_post"
				try container.encode(userID, forKey: .userID)
				try container.encode(feedback, forKey: .feedback)
			case .inviteSignup(let userIDs):
				tag = "invite_signup"
				try container.encode(userIDs, forKey: .userIDs)
			case .follow(let userIDs):
				tag = "follow"
				try container.encode(userIDs, forKey: .userIDs)
			case .friendAccept(let userIDs):
				tag = "friend_accept"
				try container.encode(userIDs, forKey: .userIDs)
			}
			try container.encode(tag, forKey: .type)
		}
	}

	/// For like and repost of a comment, and for reply:
	/// the parent object for the entire comment thread.
	public var parent: Parent?

	/// The time  when this notification was created.
	@UnixTimestamp
	public var date: Date

	/// - parameters:
	///   - id: Identifier of this notification.
	///     The newer the notification, the greater the identifier.
	///   - parent: For like and repost of a comment, and for reply:
	///     the parent object for the entire comment thread.
	///   - date: The time  when this notification was created.
	public init(
		id: NotificationID,
		payload: Payload,
		parent: Parent? = nil,
		date: Date,
	) {
		self.id = id
		self.payload = payload
		self.parent = parent
		self.date = date
	}

	private enum CodingKeys: String, CodingKey {
		case id
		case parent
		case date
	}
	public func encode(to encoder: any Encoder) throws {
		var container = encoder.container(keyedBy: CodingKeys.self)
		try container.encode(self.id, forKey: .id)
		try self.payload.encode(to: encoder)
		try container.encodeIfPresent(self.parent, forKey: .parent)
		try container.encode(self.date, forKey: .date)
	}

	public init(from decoder: Decoder) throws {
		let container = try decoder.container(keyedBy: CodingKeys.self)
		self.id = try container.decode(NotificationID.self, forKey: .id)
		self.payload = try Payload(from: decoder)
		self.parent = try container.decodeIfPresent(Parent.self, forKey: .parent)
		self.date = try container.decode(Date.self, forKey: .date)
	}
}