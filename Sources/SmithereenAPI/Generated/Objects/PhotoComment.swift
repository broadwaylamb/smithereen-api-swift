// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals

/// A comment on a photo in a photo album.
public struct PhotoComment: Hashable, Codable, Sendable, Identifiable {

	/// Unique (server-wide) identifier of this comment.
	public var id: PhotoCommentID

	/// Identifier of the photo owner.
	public var ownerID: ActorID

	/// Identifier of the user who made this comment.
	public var fromID: ActorID

	/// Globally unique ActivityPub identifier for this comment.
	/// Use this to match comments across servers.
	public var activityPubID: URL

	/// The URL of the web page representing this comment.
	/// For comments made by remote users, points to their home server.
	public var url: URL

	/// The timestamp when this comment was published, as unixtime.
	@UnixTimestamp
	public var date: Date

	/// The text of the comment as HTML.
	/// [More about text formatting](https://smithereen.software/docs/api/text-formatting).
	public var text: String?

	/// Information about likes of this comment.
	public var likes: LikeInfo?

	/// Media attachments added to this comment.
	public var attachments: [Attachment]?

	/// The content warning text, if any. If this field is present,
	/// hide the comment content, replacing it with this text, and only reveal
	/// it after an extra click or tap.
	public var contentWarning: String?

	/// Whether the current user can delete this comment.
	public var canDelete: Bool

	/// Whether the current user can edit this comment.
	public var canEdit: Bool

	/// An array of user IDs corresponding to users mentioned in this comment.
	public var mentionedUsers: [ActorID]?

	/// Array of identifiers of parent comments.
	public var parentsStack: [PhotoCommentID]?

	/// Identifier of the comment this is in reply to, if applicable.
	public var replyToComment: PhotoCommentID?

	/// Identifier of the user this is in reply to, if applicable.
	public var replyToUser: ActorID?

	/// An object describing the reply thread of this comment.
	/// Only returned when `view_type` is `threaded` or `two_level`.
	public var thread: Thread?

	public struct Thread: Hashable, Codable, Sendable {

		/// The total number of comments in this branch.
		public var count: Int

		/// The total number of replies to this comment.
		public var replyCount: Int

		/// The replies to this comment.
		public var items: [PhotoComment]

		public init(
			count: Int,
			replyCount: Int,
			items: [PhotoComment],
		) {
			self.count = count
			self.replyCount = replyCount
			self.items = items
		}

		private enum CodingKeys: String, CodingKey {
			case count
			case replyCount = "reply_count"
			case items
		}
	}

	public init(
		id: PhotoCommentID,
		ownerID: ActorID,
		fromID: ActorID,
		activityPubID: URL,
		url: URL,
		date: Date,
		text: String? = nil,
		likes: LikeInfo? = nil,
		attachments: [Attachment]? = nil,
		contentWarning: String? = nil,
		canDelete: Bool,
		canEdit: Bool,
		mentionedUsers: [ActorID]? = nil,
		parentsStack: [PhotoCommentID]? = nil,
		replyToComment: PhotoCommentID? = nil,
		replyToUser: ActorID? = nil,
		thread: Thread? = nil,
	) {
		self.id = id
		self.ownerID = ownerID
		self.fromID = fromID
		self.activityPubID = activityPubID
		self.url = url
		self.date = date
		self.text = text
		self.likes = likes
		self.attachments = attachments
		self.contentWarning = contentWarning
		self.canDelete = canDelete
		self.canEdit = canEdit
		self.mentionedUsers = mentionedUsers
		self.parentsStack = parentsStack
		self.replyToComment = replyToComment
		self.replyToUser = replyToUser
		self.thread = thread
	}

	private enum CodingKeys: String, CodingKey {
		case id
		case ownerID = "owner_id"
		case fromID = "from_id"
		case activityPubID = "ap_id"
		case url
		case date
		case text
		case likes
		case attachments
		case contentWarning = "content_warning"
		case canDelete = "can_delete"
		case canEdit = "can_edit"
		case mentionedUsers = "mentioned_users"
		case parentsStack = "parents_stack"
		case replyToComment = "reply_to_comment"
		case replyToUser = "reply_to_user"
		case thread
	}
}