// This file is automatically generated. DO NOT EDIT!
// Generated from: codegen/Sources/Schema/Objects/Poll.swift

import Foundation
import SmithereenAPIInternals

/// A poll attached to a wall post.
public struct Poll: Hashable, Codable, Sendable, Identifiable {

	/// The identifier of this poll.
	public var id: PollID

	/// The identifier of the owner of this poll.
	public var ownerID: ActorID

	/// The timestamp when this poll was created, as unixtime.
	@UnixTimestamp
	public var created: Date

	/// The text of the question.
	public var question: String?

	/// The total number of votes.
	public var votes: Int

	/// An array of objects describing the poll options.
	public var answers: [Answer]

	public struct Answer: Hashable, Codable, Sendable, Identifiable {

		/// Identifier of this option.
		public var id: PollOptionID

		/// The text of the option.
		public var text: String

		/// The number of people who voted for this option.
		public var votes: Int

		/// The percentage of people who voted for this option.
		public var rate: Double

		/// - parameters:
		///   - id: Identifier of this option.
		///   - text: The text of the option.
		///   - votes: The number of people who voted for this option.
		///   - rate: The percentage of people who voted for this option.
		public init(
			id: PollOptionID,
			text: String,
			votes: Int,
			rate: Double,
		) {
			self.id = id
			self.text = text
			self.votes = votes
			self.rate = rate
		}
	}

	/// Whether this poll is anonymous (i.e. no one can see who voted on it
	/// and for what).
	public var anonymous: Bool

	/// Whether this poll is multiple-choice.
	public var multiple: Bool

	/// If the current user has voted in this poll, the IDs of the options
	/// they voted for.
	public var answerIDs: [PollOptionID]?

	/// The timestamp when this poll ends, in unixtime.
	/// 0 if the poll does not end.
	@UnixTimestamp
	public var endDate: Date

	/// Whether this poll has ended.
	public var closed: Bool

	/// Whether the current user can edit this poll.
	public var canEdit: Bool

	/// Whether the current user can vote in this poll.
	public var canVote: Bool

	/// The identifier of the author of this poll.
	public var authorID: ActorID

	/// - parameters:
	///   - id: The identifier of this poll.
	///   - ownerID: The identifier of the owner of this poll.
	///   - created: The timestamp when this poll was created, as unixtime.
	///   - question: The text of the question.
	///   - votes: The total number of votes.
	///   - answers: An array of objects describing the poll options.
	///   - anonymous: Whether this poll is anonymous (i.e. no one can see who voted on it
	///     and for what).
	///   - multiple: Whether this poll is multiple-choice.
	///   - answerIDs: If the current user has voted in this poll, the IDs of the options
	///     they voted for.
	///   - endDate: The timestamp when this poll ends, in unixtime.
	///     0 if the poll does not end.
	///   - closed: Whether this poll has ended.
	///   - canEdit: Whether the current user can edit this poll.
	///   - canVote: Whether the current user can vote in this poll.
	///   - authorID: The identifier of the author of this poll.
	public init(
		id: PollID,
		ownerID: ActorID,
		created: Date,
		question: String? = nil,
		votes: Int,
		answers: [Answer],
		anonymous: Bool,
		multiple: Bool,
		answerIDs: [PollOptionID]? = nil,
		endDate: Date,
		closed: Bool,
		canEdit: Bool,
		canVote: Bool,
		authorID: ActorID,
	) {
		self.id = id
		self.ownerID = ownerID
		self.created = created
		self.question = question
		self.votes = votes
		self.answers = answers
		self.anonymous = anonymous
		self.multiple = multiple
		self.answerIDs = answerIDs
		self.endDate = endDate
		self.closed = closed
		self.canEdit = canEdit
		self.canVote = canVote
		self.authorID = authorID
	}

	private enum CodingKeys: String, CodingKey {
		case id
		case ownerID = "owner_id"
		case created
		case question
		case votes
		case answers
		case anonymous
		case multiple
		case answerIDs = "answer_ids"
		case endDate = "end_date"
		case closed
		case canEdit = "can_edit"
		case canVote = "can_vote"
		case authorID = "author_id"
	}
}