// This file is automatically generated. DO NOT EDIT!
// Generated from: codegen/Sources/Schema/Objects/WallPost.swift

import Foundation
import SmithereenAPIInternals

/// A post or a comment on a wall.
public struct WallPost: CommentProtocol, Identifiable {

	/// Unique (server-wide) identifier of this post.
	public var id: WallPostID

	/// Identifier of the wall owner.
	public var ownerID: ActorID

	/// Identifier of the user who made this post.
	public var fromID: ActorID

	/// Globally unique ActivityPub identifier for this post.
	/// Use this to match posts across servers.
	@URLAsString
	public var activityPubID: URL

	/// The URL of the web page representing this post.
	/// For posts made by remote users, points to their home server.
	@URLAsString
	public var url: URL

	/// The timestamp when this post was published, as unixtime.
	@UnixTimestamp
	public var date: Date

	/// The text of the post as HTML.
	/// [More about text formatting](https://smithereen.software/docs/api/text-formatting).
	public var text: String?

	/// Information about likes of this post.
	public var likes: LikeInfo?

	/// Media attachments added to this post.
	public var attachments: [Attachment]?

	/// The content warning text, if any. If this field is present,
	/// hide the post content, replacing it with this text, and only reveal
	/// it after an extra click or tap.
	public var contentWarning: String?

	/// Whether the current user can delete this post.
	public var canDelete: Bool

	/// Whether the current user can edit this post.
	public var canEdit: Bool

	/// An array of user IDs corresponding to users mentioned in this post.
	public var mentionedUsers: [ActorID]?

	/// Array of identifiers of parent comments.
	/// 
	/// - Note: Only returned for comments.
	public var parentsStack: [WallPostID]?

	/// Identifier of the comment this is in reply to, if applicable.
	/// 
	/// - Note: Only returned for comments.
	public var replyToComment: WallPostID?

	/// Identifier of the user this is in reply to, if applicable.
	/// 
	/// - Note: Only returned for comments.
	public var replyToUser: ActorID?

	/// An object describing the reply thread of this comment.
	/// Only returned when `view_type` is `threaded` or `two_level`.
	/// 
	/// - Note: Only returned for comments.
	public var thread: CommentThread<WallPost>?

	/// If this post isn’t publicly visible, the visibility setting specified by the author.
	public var privacy: Privacy?

	public enum Privacy: String, Codable, Sendable, CaseIterable {
		case followers
		case followersAndMentioned = "followers_and_mentioned"
		case friends
	}

	/// Information about reposts of this post.
	public var reposts: Reposts?

	public struct Reposts: Hashable, Codable, Sendable {

		/// How many reposts of this post were made.
		public var count: Int

		/// Whether the current user can repost this post.
		public var canRepost: Bool

		/// Whether the current user has reposted this post.
		public var userReposted: Bool

		/// - parameters:
		///   - count: How many reposts of this post were made.
		///   - canRepost: Whether the current user can repost this post.
		///   - userReposted: Whether the current user has reposted this post.
		public init(
			count: Int,
			canRepost: Bool,
			userReposted: Bool,
		) {
			self.count = count
			self.canRepost = canRepost
			self.userReposted = userReposted
		}

		private enum CodingKeys: String, CodingKey {
			case count
			case canRepost = "can_repost"
			case userReposted = "user_reposted"
		}
	}

	/// Information about comments on this post.
	/// 
	/// - Note: Only returned for top-level posts.
	public var comments: Comments?

	public struct Comments: Hashable, Codable, Sendable {

		/// The total number of comments.
		public var count: Int

		/// Whether the current user can comment on this post.
		public var canComment: Bool

		/// - parameters:
		///   - count: The total number of comments.
		///   - canComment: Whether the current user can comment on this post.
		public init(
			count: Int,
			canComment: Bool,
		) {
			self.count = count
			self.canComment = canComment
		}

		private enum CodingKeys: String, CodingKey {
			case count
			case canComment = "can_comment"
		}
	}

	/// If this is a repost, the array of reposted posts.
	/// Contains more than one element if the reposted post is itself
	/// a repost.
	/// 
	/// - Note: Only returned for top-level posts.
	public var repostHistory: [WallPost]?

	/// If this is a repost, whether this is a Mastodon-style repost
	/// (`Announce` activity). Mastodon-style reposts work like retweets on
	/// Twitter – they aren’t “real” posts, they don’t have their own
	/// comment thread and can’t be interacted with.
	/// If this is `true`, you should forward all user interactions,
	/// like comments or likes, to the reposted post (`repost_history[0]`).
	/// It’s also recommended display such posts with some indication in
	/// the UI that the user will interact with the original post.
	/// 
	/// - Note: Only returned for top-level posts.
	public var isMastodonStyleRepost: Bool?

	/// Whether the current user can pin this post to their wall.
	/// 
	/// - Note: Only returned for top-level posts.
	public var canPin: Bool?

	/// Whether this post is pinned on its owner’s wall.
	/// 
	/// - Note: Only returned for top-level posts.
	public var isPinned: Bool?

	/// - parameters:
	///   - id: Unique (server-wide) identifier of this post.
	///   - ownerID: Identifier of the wall owner.
	///   - fromID: Identifier of the user who made this post.
	///   - activityPubID: Globally unique ActivityPub identifier for this post.
	///     Use this to match posts across servers.
	///   - url: The URL of the web page representing this post.
	///     For posts made by remote users, points to their home server.
	///   - date: The timestamp when this post was published, as unixtime.
	///   - text: The text of the post as HTML.
	///     [More about text formatting](https://smithereen.software/docs/api/text-formatting).
	///   - likes: Information about likes of this post.
	///   - attachments: Media attachments added to this post.
	///   - contentWarning: The content warning text, if any. If this field is present,
	///     hide the post content, replacing it with this text, and only reveal
	///     it after an extra click or tap.
	///   - canDelete: Whether the current user can delete this post.
	///   - canEdit: Whether the current user can edit this post.
	///   - mentionedUsers: An array of user IDs corresponding to users mentioned in this post.
	///   - parentsStack: Array of identifiers of parent comments.
	///     
	///     - Note: Only returned for comments.
	///   - replyToComment: Identifier of the comment this is in reply to, if applicable.
	///     
	///     - Note: Only returned for comments.
	///   - replyToUser: Identifier of the user this is in reply to, if applicable.
	///     
	///     - Note: Only returned for comments.
	///   - thread: An object describing the reply thread of this comment.
	///     Only returned when `view_type` is `threaded` or `two_level`.
	///     
	///     - Note: Only returned for comments.
	///   - privacy: If this post isn’t publicly visible, the visibility setting specified by the author.
	///   - reposts: Information about reposts of this post.
	///   - comments: Information about comments on this post.
	///     
	///     - Note: Only returned for top-level posts.
	///   - repostHistory: If this is a repost, the array of reposted posts.
	///     Contains more than one element if the reposted post is itself
	///     a repost.
	///     
	///     - Note: Only returned for top-level posts.
	///   - isMastodonStyleRepost: If this is a repost, whether this is a Mastodon-style repost
	///     (`Announce` activity). Mastodon-style reposts work like retweets on
	///     Twitter – they aren’t “real” posts, they don’t have their own
	///     comment thread and can’t be interacted with.
	///     If this is `true`, you should forward all user interactions,
	///     like comments or likes, to the reposted post (`repost_history[0]`).
	///     It’s also recommended display such posts with some indication in
	///     the UI that the user will interact with the original post.
	///     
	///     - Note: Only returned for top-level posts.
	///   - canPin: Whether the current user can pin this post to their wall.
	///     
	///     - Note: Only returned for top-level posts.
	///   - isPinned: Whether this post is pinned on its owner’s wall.
	///     
	///     - Note: Only returned for top-level posts.
	public init(
		id: WallPostID,
		ownerID: ActorID,
		fromID: ActorID,
		activityPubID: URL,
		url: URL,
		date: Date,
		text: String? = nil,
		likes: LikeInfo? = nil,
		attachments: [Attachment]? = nil,
		contentWarning: String? = nil,
		canDelete: Bool,
		canEdit: Bool,
		mentionedUsers: [ActorID]? = nil,
		parentsStack: [WallPostID]? = nil,
		replyToComment: WallPostID? = nil,
		replyToUser: ActorID? = nil,
		thread: CommentThread<WallPost>? = nil,
		privacy: Privacy? = nil,
		reposts: Reposts? = nil,
		comments: Comments? = nil,
		repostHistory: [WallPost]? = nil,
		isMastodonStyleRepost: Bool? = nil,
		canPin: Bool? = nil,
		isPinned: Bool? = nil,
	) {
		self.id = id
		self.ownerID = ownerID
		self.fromID = fromID
		self.activityPubID = activityPubID
		self.url = url
		self.date = date
		self.text = text
		self.likes = likes
		self.attachments = attachments
		self.contentWarning = contentWarning
		self.canDelete = canDelete
		self.canEdit = canEdit
		self.mentionedUsers = mentionedUsers
		self.parentsStack = parentsStack
		self.replyToComment = replyToComment
		self.replyToUser = replyToUser
		self.thread = thread
		self.privacy = privacy
		self.reposts = reposts
		self.comments = comments
		self.repostHistory = repostHistory
		self.isMastodonStyleRepost = isMastodonStyleRepost
		self.canPin = canPin
		self.isPinned = isPinned
	}

	private enum CodingKeys: String, CodingKey {
		case id
		case ownerID = "owner_id"
		case fromID = "from_id"
		case activityPubID = "ap_id"
		case url
		case date
		case text
		case likes
		case attachments
		case contentWarning = "content_warning"
		case canDelete = "can_delete"
		case canEdit = "can_edit"
		case mentionedUsers = "mentioned_users"
		case parentsStack = "parents_stack"
		case replyToComment = "reply_to_comment"
		case replyToUser = "reply_to_user"
		case thread
		case privacy
		case reposts
		case comments
		case repostHistory = "repost_history"
		case isMastodonStyleRepost = "is_mastodon_style_repost"
		case canPin = "can_pin"
		case isPinned = "is_pinned"
	}
}