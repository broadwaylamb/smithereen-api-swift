// This file is automatically generated. DO NOT EDIT!
// Generated from: codegen/Sources/Schema/Objects/WallPost.swift

import Foundation
import SmithereenAPIInternals

/// A post on a wall.
public struct WallPost: WallPostProtocol, Identifiable {

	/// Unique (server-wide) identifier of this post.
	public var id: WallPostID

	/// Identifier of the wall owner.
	public var ownerID: ActorID

	/// Identifier of the user who made this post.
	public var fromID: ActorID

	/// Globally unique ActivityPub identifier for this post.
	/// Use this to match posts across servers.
	@URLAsString
	public var activityPubID: URL

	/// The URL of the web page representing this post.
	/// For posts made by remote users, points to their home server.
	@URLAsString
	public var url: URL

	/// The timestamp when this post was published, as unixtime.
	@UnixTimestamp
	public var date: Date

	/// The text of the post as HTML.
	/// [More about text formatting](https://smithereen.software/docs/api/text-formatting).
	public var text: String?

	/// Information about likes of this post.
	public var likes: LikeInfo?

	/// Media attachments added to this post.
	public var attachments: [Attachment]?

	/// The content warning text, if any. If this field is present,
	/// hide the post content, replacing it with this text, and only reveal
	/// it after an extra click or tap.
	public var contentWarning: String?

	/// Whether the current user can delete this post.
	public var canDelete: Bool

	/// Whether the current user can edit this post.
	public var canEdit: Bool

	/// An array of user IDs corresponding to users mentioned in this post.
	public var mentionedUsers: [ActorID]?

	/// If this post isn’t publicly visible, the visibility setting specified by the author.
	public var privacy: WallPost.Privacy?

	/// Information about reposts of this post.
	public var reposts: WallPost.Reposts?

	/// Information about how this post was created.
	public var postSource: WallPost.Source?

	public enum Privacy: String, Codable, Sendable, CaseIterable {
		case followers
		case followersAndMentioned = "followers_and_mentioned"
		case friends
	}

	public struct Reposts: Hashable, Codable, Sendable {

		/// How many reposts of this post were made.
		public var count: Int

		/// Whether the current user can repost this post.
		public var canRepost: Bool

		/// Whether the current user has reposted this post.
		public var userReposted: Bool

		/// - parameters:
		///   - count: How many reposts of this post were made.
		///   - canRepost: Whether the current user can repost this post.
		///   - userReposted: Whether the current user has reposted this post.
		public init(
			count: Int,
			canRepost: Bool,
			userReposted: Bool,
		) {
			self.count = count
			self.canRepost = canRepost
			self.userReposted = userReposted
		}

		private enum CodingKeys: String, CodingKey {
			case count
			case canRepost = "can_repost"
			case userReposted = "user_reposted"
		}
	}

	public struct Source: Hashable, Codable, Sendable {

		/// If this post was published using the API, information about
		/// the app that was used.
		public var app: Application?

		public struct Application: Hashable, Codable, Sendable {

			/// Unique (server-wide) identifier of the app.
			public var id: ApplicationID

			/// Globally unique ActivityPub identifier for this app.
			/// Use this to match apps across servers.
			@URLAsString
			public var activityPubID: URL

			/// The user-visible name of the app.
			public var name: String

			/// - parameters:
			///   - id: Unique (server-wide) identifier of the app.
			///   - activityPubID: Globally unique ActivityPub identifier for this app.
			///     Use this to match apps across servers.
			///   - name: The user-visible name of the app.
			public init(
				id: ApplicationID,
				activityPubID: URL,
				name: String,
			) {
				self.id = id
				self.activityPubID = activityPubID
				self.name = name
			}

			private enum CodingKeys: String, CodingKey {
				case id
				case activityPubID = "ap_id"
				case name
			}
		}

		/// If this post was created as part of another user action,
		/// the type of that action.
		public var action: Action?

		public enum Action: String, Codable, Sendable, CaseIterable {

			/// The user has uploaded a new profile picture.
			case profilePictureUpdate = "profile_picture_update"
		}

		/// - parameters:
		///   - app: If this post was published using the API, information about
		///     the app that was used.
		///   - action: If this post was created as part of another user action,
		///     the type of that action.
		public init(
			app: Application? = nil,
			action: Action? = nil,
		) {
			self.app = app
			self.action = action
		}
	}

	/// Information about comments on this post.
	public var comments: Comments?

	public struct Comments: Hashable, Codable, Sendable {

		/// The total number of comments.
		public var count: Int

		/// Whether the current user can comment on this post.
		public var canComment: Bool

		/// - parameters:
		///   - count: The total number of comments.
		///   - canComment: Whether the current user can comment on this post.
		public init(
			count: Int,
			canComment: Bool,
		) {
			self.count = count
			self.canComment = canComment
		}

		private enum CodingKeys: String, CodingKey {
			case count
			case canComment = "can_comment"
		}
	}

	/// If this is a repost, the array of reposted posts.
	/// Contains more than one element if the reposted post is itself
	/// a repost.
	public var repostHistory: [WallPost]?

	/// If this is a repost, whether this is a Mastodon-style repost
	/// (`Announce` activity). Mastodon-style reposts work like retweets on
	/// Twitter – they aren’t “real” posts, they don’t have their own
	/// comment thread and can’t be interacted with.
	/// If this is `true`, you should forward all user interactions,
	/// like comments or likes, to the reposted post (`repost_history[0]`).
	/// It’s also recommended display such posts with some indication in
	/// the UI that the user will interact with the original post.
	public var isMastodonStyleRepost: Bool?

	/// Whether the current user can pin this post to their wall.
	public var canPin: Bool?

	/// Whether this post is pinned on its owner’s wall.
	public var isPinned: Bool?

	/// - parameters:
	///   - id: Unique (server-wide) identifier of this post.
	///   - ownerID: Identifier of the wall owner.
	///   - fromID: Identifier of the user who made this post.
	///   - activityPubID: Globally unique ActivityPub identifier for this post.
	///     Use this to match posts across servers.
	///   - url: The URL of the web page representing this post.
	///     For posts made by remote users, points to their home server.
	///   - date: The timestamp when this post was published, as unixtime.
	///   - text: The text of the post as HTML.
	///     [More about text formatting](https://smithereen.software/docs/api/text-formatting).
	///   - likes: Information about likes of this post.
	///   - attachments: Media attachments added to this post.
	///   - contentWarning: The content warning text, if any. If this field is present,
	///     hide the post content, replacing it with this text, and only reveal
	///     it after an extra click or tap.
	///   - canDelete: Whether the current user can delete this post.
	///   - canEdit: Whether the current user can edit this post.
	///   - mentionedUsers: An array of user IDs corresponding to users mentioned in this post.
	///   - privacy: If this post isn’t publicly visible, the visibility setting specified by the author.
	///   - reposts: Information about reposts of this post.
	///   - postSource: Information about how this post was created.
	///   - comments: Information about comments on this post.
	///   - repostHistory: If this is a repost, the array of reposted posts.
	///     Contains more than one element if the reposted post is itself
	///     a repost.
	///   - isMastodonStyleRepost: If this is a repost, whether this is a Mastodon-style repost
	///     (`Announce` activity). Mastodon-style reposts work like retweets on
	///     Twitter – they aren’t “real” posts, they don’t have their own
	///     comment thread and can’t be interacted with.
	///     If this is `true`, you should forward all user interactions,
	///     like comments or likes, to the reposted post (`repost_history[0]`).
	///     It’s also recommended display such posts with some indication in
	///     the UI that the user will interact with the original post.
	///   - canPin: Whether the current user can pin this post to their wall.
	///   - isPinned: Whether this post is pinned on its owner’s wall.
	public init(
		id: WallPostID,
		ownerID: ActorID,
		fromID: ActorID,
		activityPubID: URL,
		url: URL,
		date: Date,
		text: String? = nil,
		likes: LikeInfo? = nil,
		attachments: [Attachment]? = nil,
		contentWarning: String? = nil,
		canDelete: Bool,
		canEdit: Bool,
		mentionedUsers: [ActorID]? = nil,
		privacy: WallPost.Privacy? = nil,
		reposts: WallPost.Reposts? = nil,
		postSource: WallPost.Source? = nil,
		comments: Comments? = nil,
		repostHistory: [WallPost]? = nil,
		isMastodonStyleRepost: Bool? = nil,
		canPin: Bool? = nil,
		isPinned: Bool? = nil,
	) {
		self.id = id
		self.ownerID = ownerID
		self.fromID = fromID
		self.activityPubID = activityPubID
		self.url = url
		self.date = date
		self.text = text
		self.likes = likes
		self.attachments = attachments
		self.contentWarning = contentWarning
		self.canDelete = canDelete
		self.canEdit = canEdit
		self.mentionedUsers = mentionedUsers
		self.privacy = privacy
		self.reposts = reposts
		self.postSource = postSource
		self.comments = comments
		self.repostHistory = repostHistory
		self.isMastodonStyleRepost = isMastodonStyleRepost
		self.canPin = canPin
		self.isPinned = isPinned
	}

	private enum CodingKeys: String, CodingKey {
		case id
		case ownerID = "owner_id"
		case fromID = "from_id"
		case activityPubID = "ap_id"
		case url
		case date
		case text
		case likes
		case attachments
		case contentWarning = "content_warning"
		case canDelete = "can_delete"
		case canEdit = "can_edit"
		case mentionedUsers = "mentioned_users"
		case privacy
		case reposts
		case postSource = "post_source"
		case comments
		case repostHistory = "repost_history"
		case isMastodonStyleRepost = "is_mastodon_style_repost"
		case canPin = "can_pin"
		case isPinned = "is_pinned"
	}
}