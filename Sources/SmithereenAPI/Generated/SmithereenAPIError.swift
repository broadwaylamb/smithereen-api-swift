// This file is automatically generated. DO NOT EDIT!

import Foundation
import SmithereenAPIInternals

public struct SmithereenAPIError: Hashable, Codable, Sendable {
	public var code: Code

	public struct Code: Hashable, RawRepresentable, CaseIterable, Codable, Sendable {
		public var rawValue: Int
		public init(rawValue: Int) {
			self.rawValue = rawValue
		}

		/// See the error message for details.
		public static let other = Self(rawValue: 1)

		/// Make sure the method you’re calling
		/// [exists](https://smithereen.software/docs/api/methods) on
		/// the Smithereen version your server is running, and that there
		/// are no typos in the method name.
		public static let unknownMethodPassed = Self(rawValue: 3)

		/// If you passed an access token, it’s invalid, revoked,or expired.
		/// If you did not, this method requires an authenticated user.
		public static let userAuthorizationFailed = Self(rawValue: 5)

		/// You made more than 3 requests per second per token
		/// (for authenticated requests) or per IPv4 address or IPv6 /64 
		/// (for anonymous requests). If you need to make multiple requests
		/// in a quick succession, use the ``Execute`` method.
		public static let tooManyRequestsPerSecond = Self(rawValue: 6)

		/// Your access token does not have the necessary scopes to call
		/// this method or perform this action. See the page for the method
		/// you’re calling for the permissions it requires.
		public static let permissionDenied = Self(rawValue: 7)

		/// Make sure your request is
		/// [correctly formatted and contains all necessary parameters](https://smithereen.software/docs/api/requests).
		public static let invalidRequest = Self(rawValue: 8)

		/// You are performing the same type of action too often.
		/// Try again later.
		public static let floodControl = Self(rawValue: 9)

		/// The server was unable to complete your request because of a bug
		/// or a misconfiguration. Try again later, and if the error
		/// persists, report it to the server staff.
		/// If this is your server, see the server log 
		/// (`journalctl -u smithereen.service`) for details.
		public static let internalServerError = Self(rawValue: 10)

		/// Failed to compile the script in the ``Execute`` method.
		public static let executeFailedToCompile = Self(rawValue: 12)

		/// A runtime error occurred during script execution in
		/// the ``Execute`` method.
		public static let executeRuntimeError = Self(rawValue: 13)

		/// You are performing the same type of action too often, and
		/// the server suspects you of spamming. [You need to present
		/// a captcha image to the user and retry the request](https://smithereen.software/docs/api/captcha).
		public static let captchaNeeded = Self(rawValue: 14)

		/// The object you’re requesting, or the action you’re performing,
		/// is not available to the current user due to privacy settings or
		/// because they were blocked.
		public static let accessDenied = Self(rawValue: 15)

		/// You need to go through
		/// [web-based validation](https://smithereen.software/docs/api/validation)
		/// to perform this action.
		public static let validationRequired = Self(rawValue: 17)

		/// The current user’s account is suspended or frozen. They can’t
		/// access this server. Details about why this happened and further
		/// instructions for the user are available if they log in on
		/// the web.
		public static let accountBanned = Self(rawValue: 18)

		/// See the method page for required parameters and their format.
		public static let invalidMethodParameters = Self(rawValue: 100)

		public static let allCases: [Code] = [
			.other,
			.unknownMethodPassed,
			.userAuthorizationFailed,
			.tooManyRequestsPerSecond,
			.permissionDenied,
			.invalidRequest,
			.floodControl,
			.internalServerError,
			.executeFailedToCompile,
			.executeRuntimeError,
			.captchaNeeded,
			.accessDenied,
			.validationRequired,
			.accountBanned,
			.invalidMethodParameters,
		]
	}
	public var message: String
	public var requestParams: [String : String]?

	/// Returned only for the ``Execute`` request.
	public var method: String?

	public init(
		code: Code,
		message: String,
		requestParams: [String : String]? = nil,
		method: String? = nil,
	) {
		self.code = code
		self.message = message
		self.requestParams = requestParams
		self.method = method
	}

	private enum CodingKeys: String, CodingKey {
		case code = "error_code"
		case message = "error_msg"
		case requestParams = "request_params"
		case method
	}
}